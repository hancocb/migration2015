#!/usr/local/bin/python
#------------------------------------------------------
print "Content-Type: text/html\n\n";
print "<link rel=\"stylesheet\" type=\"text/css\" href=\"button2.css\">\n" ;
#----------------------------------------------

import cgi, cgitb, os, string, random
from string import split,join
form = cgi.FieldStorage()
cgitb.enable()

#----S input----------------------------------------------------------------------------------------------------
idx = int(form.getvalue('i'))
jdx = int(form.getvalue('j'))

#print '<li>',idx, jdx 
#----E input----------------------------------------------------------------------------------------------------
#-------------S HTML--------------------------------------------------------------------------------------------
print '<html>'
print '<head> <title>BMP win.</title> </head>'
print '<body onLoad="init();">'
print '<form name=main>'
print '<center>'
print '  <input type=hidden name=UrbanArea><input type=hidden name=Ratio><br>'
print '  <table border=1>'
print '    <tr>'
print '      <td align=right>Total Available Area (ac) : </td>'
print '      <td align=left>'
print '        <input type=text style="text-align:right;border-width:0px;font-size:11pt" size=10 name=AvArea readonly>(ac)'
print '      </td>'
print '    </tr>'
print '    <tr>'
print '      <td align=right>Effective BMP application area (ac) : </td>'
print '      <td align=left>'
print '        <input type=text style="text-align:right;border-width:0px;font-size:11pt" size=10 name=myArea value=0.0>(ac)'
print '      </td>' 
print '    </tr>'
print '    <tr>'
print '      <td align=right>Select BMP :</td>'
print '      <td align=left>'
print '        <select name=selectedBMP>'
print '          <option value=0>No BMP'
print '          <option value=1>Alum Treatment'
print '          <option value=2>Bioretention facility'
print '          <option value=3>Combined BMPs-Calculated'
print '          <option value=4>Concrete Grid Pavement'
print '          <option value=5>Dry Detention'
print '          <option value=6>Extended Wet Detention'
print '          <option value=7>Filter Strip-Agricultural'
print '          <option value=8>Grass Swales'
print '          <option value=9>Infiltration Basin'
print '          <option value=10>Infiltration Devises'
print '          <option value=11>Infiltration Trench'
print '          <option value=12>LID*/Cistern'
print '          <option value=13>LID*/Cistern+Rain Barrel'
print '          <option value=14>LID*/Rain Barrel'
print '          <option value=15>LID/Bioretention'
print '          <option value=16>LID/Dry Well'
print '          <option value=17>LID/Filter/Buffer Strip'
print '          <option value=18>LID/Infiltration Swale'
print '          <option value=19>LID/Infiltration Trench'
print '          <option value=20>LID/Vegetated Swale'
print '          <option value=21>LID/Wet Swale'
print '          <option value=22>Oil/Grit Separator'
print '          <option value=23>Porous Pavement'
print '          <option value=24>Sand Filter/Infiltration Basin'
print '          <option value=25>Sand Filters'
print '          <option value=26>Settling Basin'
print '          <option value=27>Vegetated Filter Strips'
print '          <option value=28>Weekly Street Sweeping'
print '          <option value=29>Wet Pond'
print '          <option value=30>Wetland Detention'
print '          <option value=31>WQ Inlet w/Sand Filter'
print '          <option value=32>WQ Inlets'
print '        </select>'
print '      </td>'
print '    </tr>'
print '  </table>'

print '  <input style="WIDTH:200;height:30;CURSOR:hand" type=button value="Apply LID/BMP" onClick="javascript:returnVal()">'

print '</form>'
print '</body>'
print '<script language="JavaScript">'
print 'function returnVal() {'
print '  if ( document.main.selectedBMP.selectedIndex == 0 ) {'
print '    var eff_1 = 0.0 ;'
print '    var eff_2 = 0.0 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.0 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 1 ) {'
print '    var eff_1 = 0.6 ;'
print '    var eff_2 = 0.9 ;'
print '    var eff_3 = 0.6 ;'
print '    var eff_4 = 0.95 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 2 ) {'
print '    var eff_1 = 0.63 ;'
print '    var eff_2 = 0.8 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.0 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 3 ) {'
print '    var eff_1 = 0.0 ;'
print '    var eff_2 = 0.0 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.0 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 4 ) {'
print '    var eff_1 = 0.9 ;'
print '    var eff_2 = 0.9 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.9 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 5 ) {'
print '    var eff_1 = 0.3 ;'
print '    var eff_2 = 0.26 ;'
print '    var eff_3 = 0.27 ;'
print '    var eff_4 = 0.575 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 6 ) {'
print '    var eff_1 = 0.55 ;'
print '    var eff_2 = 0.685 ;'
print '    var eff_3 = 0.72 ;'
print '    var eff_4 = 0.86 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 7 ) {'
print '    var eff_1 = 0.5325 ;'
print '    var eff_2 = 0.6125 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.65 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 8 ) {'
print '    var eff_1 = 0.1 ;'
print '    var eff_2 = 0.25 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.65 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 9 ) {'
print '    var eff_1 = 0.6 ;'
print '    var eff_2 = 0.65 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.75 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 10 ) {'
print '    var eff_1 = 0.0 ;'
print '    var eff_2 = 0.83 ;'
print '    var eff_3 = 0.83 ;'
print '    var eff_4 = 0.94 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 11 ) {'
print '    var eff_1 = 0.55 ;'
print '    var eff_2 = 0.6 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.75 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 12 ) {'
print '    var eff_1 = 0.0 ;'
print '    var eff_2 = 0.0 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.0 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 13 ) {'
print '    var eff_1 = 0.0 ;'
print '    var eff_2 = 0.0 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.0 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 14 ) {'
print '    var eff_1 = 0.0 ;'
print '    var eff_2 = 0.0 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.0 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 15 ) {'
print '    var eff_1 = 0.43 ;'
print '    var eff_2 = 0.81 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.0 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 16 ) {'
print '    var eff_1 = 0.5 ;'
print '    var eff_2 = 0.5 ;'
print '    var eff_3 = 0.7 ;'
print '    var eff_4 = 0.9 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 17 ) {'
print '    var eff_1 = 0.3 ;'
print '    var eff_2 = 0.3 ;'
print '    var eff_3 = 0.4 ;'
print '    var eff_4 = 0.6 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 18 ) {'
print '    var eff_1 = 0.5 ;'
print '    var eff_2 = 0.65 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.9 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 19 ) {'
print '    var eff_1 = 0.5 ;'
print '    var eff_2 = 0.5 ;'
print '    var eff_3 = 0.7 ;'
print '    var eff_4 = 0.9 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 20 ) {'
print '    var eff_1 = 0.075 ;'
print '    var eff_2 = 0.175 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.475 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 21 ) {'
print '    var eff_1 = 0.4 ;'
print '    var eff_2 = 0.2 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.8 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 22 ) {'
print '    var eff_1 = 0.05 ;'
print '    var eff_2 = 0.05 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.15 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 23 ) {'
print '    var eff_1 = 0.85 ;'
print '    var eff_2 = 0.65 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.9 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 24 ) {'
print '    var eff_1 = 0.35 ;'
print '    var eff_2 = 0.5 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.8 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 25 ) {'
print '    var eff_1 = 0.0 ;'
print '    var eff_2 = 0.375 ;'
print '    var eff_3 = 0.4 ;'
print '    var eff_4 = 0.825 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 26 ) {'
print '    var eff_1 = 0.0 ;'
print '    var eff_2 = 0.515 ;'
print '    var eff_3 = 0.56 ;'
print '    var eff_4 = 0.815 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 27) {'
print '    var eff_1 = 0.4 ;'
print '    var eff_2 = 0.4525 ;'
print '    var eff_3 = 0.505 ;'
print '    var eff_4 = 0.73 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 28 ) {'
print '    var eff_1 = 0.0 ;'
print '    var eff_2 = 0.06 ;'
print '    var eff_3 = 0.06 ;'
print '    var eff_4 = 0.16 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 29 ) {'
print '    var eff_1 = 0.35 ;'
print '    var eff_2 = 0.45 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.6 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 30 ) {'
print '    var eff_1 = 0.2 ;'
print '    var eff_2 = 0.44 ;'
print '    var eff_3 = 0.63 ;'
print '    var eff_4 = 0.775 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 31 ) {'
print '    var eff_1 = 0.35 ;'
print '    var eff_2 = 0.0 ;'
print '    var eff_3 = 0.0 ;'
print '    var eff_4 = 0.8 ;'
print '  } else if ( document.main.selectedBMP.selectedIndex == 32 ) {'
print '    var eff_1 = 0.2 ;'
print '    var eff_2 = 0.09 ;'
print '    var eff_3 = 0.13 ;'
print '    var eff_4 = 0.37 ;'
print '  }'

tmpStr_area = 'opener.main.UrbanBMP_1_' + str('%02i' % int(idx)) + str(jdx) + '.value = ' 
tmpStr_area = tmpStr_area + 'document.main.myArea.value ;'
tmpStr_1 = 'opener.main.UrbanBMP_2_' + str('%02i' % int(idx)) + str(jdx) + '.value = ' + 'eff_1 ;'
tmpStr_2 = 'opener.main.UrbanBMP_3_' + str('%02i' % int(idx)) + str(jdx) + '.value = ' + 'eff_2 ;'
tmpStr_3 = 'opener.main.UrbanBMP_4_' + str('%02i' % int(idx)) + str(jdx) + '.value = ' + 'eff_3 ;'
tmpStr_4 = 'opener.main.UrbanBMP_5_' + str('%02i' % int(idx)) + str(jdx) + '.value = ' + 'eff_4 ;'
print tmpStr_area
print tmpStr_1
print tmpStr_2
print tmpStr_3
print tmpStr_4

#----send UrbanInfo
InfoStr_1 = '  opener.opener.document.bmpMain.UrbanBMPinfo_' + str('%02i'%int(idx)) + str(jdx) + '.value = '
InfoStr_2 = 'document.main.selectedBMP.value ;'
print InfoStr_1, InfoStr_2

print '}'

print 'function init() {'
tmpInitStr_1 = '  document.main.UrbanArea.value = '
tmpInitStr_2 = 'opener.opener.document.ubForm.ubArea_' + str('%02i' % int(idx)) + '.value ;'
print tmpInitStr_1, tmpInitStr_2
tmpInitStr_3 = '  document.main.Ratio.value = '
tmpInitStr_4 = 'opener.opener.document.ubForm.ubDis_' + str('%02i' % int(idx)) + str(jdx) + '.value ;'
print tmpInitStr_3, tmpInitStr_4
print '  var tmpVal_1 = document.main.UrbanArea.value * 1.0 ;'
print '  var tmpVal_2 = document.main.Ratio.value * 0.01 ;'
print '  var AvArea = tmpVal_1 * tmpVal_2 ;'
print '  AvArea = Math.round(AvArea*100) / 100 ;'
print '  document.main.AvArea.value = AvArea ;'

#----read UrbanBMPinfo
InfoStr_1 = '  document.main.selectedBMP.value = '
InfoStr_2 = 'opener.opener.document.bmpMain.UrbanBMPinfo_' + str('%02i'%int(idx)) + str(jdx) + '.value ;'
print InfoStr_1, InfoStr_2

InfoStr_3 = '  document.main.myArea.value = opener.main.UrbanBMP_1_' + str('%02i' % int(idx)) + str(jdx) + '.value ;'
print InfoStr_3

print '}'

print '</script>'
print '</html>'
#-------------E HTML--------------------------------------------------------------------------------------------





